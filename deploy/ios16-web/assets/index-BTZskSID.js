import{c as B,v as V,o as J,a as F,u as E,b as T,g as K,d as N,e as Q,f as X,h as Y,i as d,j as tt,k as nt,l as S,m as z,n as v,p as it,q as rt,r as et,s as lt,t as ut,w as at}from"./index-uKFtkqWg.js";function st(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ot(t,r,i){const a=B((i||{}).ignore||[]),s=ft(r);let n=-1;for(;++n<s.length;)V(t,"text",u);function u(o,m){let l=-1,f;for(;++l<m.length;){const y=m[l],w=f?f.children:void 0;if(a(y,w?w.indexOf(y):void 0,f))return;f=y}if(f)return k(o,m)}function k(o,m){const l=m[m.length-1],f=s[n][0],y=s[n][1];let w=0;const C=l.children.indexOf(o);let D=!1,c=[];f.lastIndex=0;let x=f.exec(o.value);for(;x;){const P=x.index,q={index:x.index,input:x.input,stack:[...m,o]};let h=y(...x,q);if(typeof h=="string"&&(h=h.length>0?{type:"text",value:h}:void 0),h===!1?f.lastIndex=P+1:(w!==P&&c.push({type:"text",value:o.value.slice(w,P)}),Array.isArray(h)?c.push(...h):h&&c.push(h),w=P+x[0].length,D=!0),!f.global)break;x=f.exec(o.value)}return D?(w<o.value.length&&c.push({type:"text",value:o.value.slice(w)}),l.children.splice(C,1,...c)):c=[o],C+c.length}}function ft(t){const r=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const i=!t[0]||Array.isArray(t[0])?t:[t];let e=-1;for(;++e<i.length;){const a=i[e];r.push([mt(a[0]),kt(a[1])])}return r}function mt(t){return typeof t=="string"?new RegExp(st(t),"g"):t}function kt(t){return typeof t=="function"?t:function(){return t}}const b="phrasing",I=["autolink","link","image","label"];function pt(){return{transforms:[Et],enter:{literalAutolink:gt,literalAutolinkEmail:M,literalAutolinkHttp:M,literalAutolinkWww:M},exit:{literalAutolink:At,literalAutolinkEmail:xt,literalAutolinkHttp:wt,literalAutolinkWww:ct}}}function ht(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:b,notInConstruct:I},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:b,notInConstruct:I},{character:":",before:"[ps]",after:"\\/",inConstruct:b,notInConstruct:I}]}}function gt(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function M(t){this.config.enter.autolinkProtocol.call(this,t)}function wt(t){this.config.exit.autolinkProtocol.call(this,t)}function ct(t){this.config.exit.data.call(this,t);const r=this.stack[this.stack.length-1];J(r.type==="link"),r.url="http://"+this.sliceSerialize(t)}function xt(t){this.config.exit.autolinkEmail.call(this,t)}function At(t){this.exit(t)}function Et(t){ot(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,vt],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),yt]],{ignore:["link","linkReference"]})}function vt(t,r,i,e,a){let s="";if(!_(a)||(/^w/i.test(r)&&(i=r+i,r="",s="http://"),!zt(i)))return!1;const n=Pt(i+e);if(!n[0])return!1;const u={type:"link",title:null,url:s+r+n[0],children:[{type:"text",value:r+n[0]}]};return n[1]?[u,{type:"text",value:n[1]}]:u}function yt(t,r,i,e){return!_(e,!0)||/[-\d_]$/.test(i)?!1:{type:"link",title:null,url:"mailto:"+r+"@"+i,children:[{type:"text",value:r+"@"+i}]}}function zt(t){const r=t.split(".");return!(r.length<2||r[r.length-1]&&(/_/.test(r[r.length-1])||!/[a-zA-Z\d]/.test(r[r.length-1]))||r[r.length-2]&&(/_/.test(r[r.length-2])||!/[a-zA-Z\d]/.test(r[r.length-2])))}function Pt(t){const r=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!r)return[t,void 0];t=t.slice(0,r.index);let i=r[0],e=i.indexOf(")");const a=F(t,"(");let s=F(t,")");for(;e!==-1&&a>s;)t+=i.slice(0,e+1),i=i.slice(e+1),e=i.indexOf(")"),s++;return[t,i]}function _(t,r){const i=t.input.charCodeAt(t.index-1);return(t.index===0||E(i)||T(i))&&(!r||i!==47)}function bt(){return[pt(),K(),N(),Q(),X()]}function It(t){return{extensions:[ht(),Y(t),d(),tt(t),nt()]}}const Mt={tokenize:Dt,partial:!0},R={tokenize:Ft,partial:!0},H={tokenize:_t,partial:!0},O={tokenize:Rt,partial:!0},Lt={tokenize:Ht,partial:!0},$={name:"wwwAutolink",tokenize:Wt,previous:j},U={name:"protocolAutolink",tokenize:Ct,previous:G},g={name:"emailAutolink",tokenize:St,previous:Z},p={};function Tt(){return{text:p}}let A=48;for(;A<123;)p[A]=g,A++,A===58?A=65:A===91&&(A=97);p[43]=g;p[45]=g;p[46]=g;p[95]=g;p[72]=[g,U];p[104]=[g,U];p[87]=[g,$];p[119]=[g,$];function St(t,r,i){const e=this;let a,s;return n;function n(l){return!L(l)||!Z.call(e,e.previous)||W(e.events)?i(l):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(l))}function u(l){return L(l)?(t.consume(l),u):l===64?(t.consume(l),k):i(l)}function k(l){return l===46?t.check(Lt,m,o)(l):l===45||l===95||S(l)?(s=!0,t.consume(l),k):m(l)}function o(l){return t.consume(l),a=!0,k}function m(l){return s&&a&&z(e.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),r(l)):i(l)}}function Wt(t,r,i){const e=this;return a;function a(n){return n!==87&&n!==119||!j.call(e,e.previous)||W(e.events)?i(n):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Mt,t.attempt(R,t.attempt(H,s),i),i)(n))}function s(n){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),r(n)}}function Ct(t,r,i){const e=this;let a="",s=!1;return n;function n(l){return(l===72||l===104)&&G.call(e,e.previous)&&!W(e.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),a+=String.fromCodePoint(l),t.consume(l),u):i(l)}function u(l){if(z(l)&&a.length<5)return a+=String.fromCodePoint(l),t.consume(l),u;if(l===58){const f=a.toLowerCase();if(f==="http"||f==="https")return t.consume(l),k}return i(l)}function k(l){return l===47?(t.consume(l),s?o:(s=!0,k)):i(l)}function o(l){return l===null||it(l)||v(l)||E(l)||T(l)?i(l):t.attempt(R,t.attempt(H,m),i)(l)}function m(l){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),r(l)}}function Dt(t,r,i){let e=0;return a;function a(n){return(n===87||n===119)&&e<3?(e++,t.consume(n),a):n===46&&e===3?(t.consume(n),s):i(n)}function s(n){return n===null?i(n):r(n)}}function Ft(t,r,i){let e,a,s;return n;function n(o){return o===46||o===95?t.check(O,k,u)(o):o===null||v(o)||E(o)||o!==45&&T(o)?k(o):(s=!0,t.consume(o),n)}function u(o){return o===95?e=!0:(a=e,e=void 0),t.consume(o),n}function k(o){return a||e||!s?i(o):r(o)}}function _t(t,r){let i=0,e=0;return a;function a(n){return n===40?(i++,t.consume(n),a):n===41&&e<i?s(n):n===33||n===34||n===38||n===39||n===41||n===42||n===44||n===46||n===58||n===59||n===60||n===63||n===93||n===95||n===126?t.check(O,r,s)(n):n===null||v(n)||E(n)?r(n):(t.consume(n),a)}function s(n){return n===41&&e++,t.consume(n),a}}function Rt(t,r,i){return e;function e(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),e):u===38?(t.consume(u),s):u===93?(t.consume(u),a):u===60||u===null||v(u)||E(u)?r(u):i(u)}function a(u){return u===null||u===40||u===91||v(u)||E(u)?r(u):e(u)}function s(u){return z(u)?n(u):i(u)}function n(u){return u===59?(t.consume(u),e):z(u)?(t.consume(u),n):i(u)}}function Ht(t,r,i){return e;function e(s){return t.consume(s),a}function a(s){return S(s)?i(s):r(s)}}function j(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||v(t)}function G(t){return!z(t)}function Z(t){return!(t===47||L(t))}function L(t){return t===43||t===45||t===46||t===95||S(t)}function W(t){let r=t.length,i=!1;for(;r--;){const e=t[r][1];if((e.type==="labelLink"||e.type==="labelImage")&&!e._balanced){i=!0;break}if(e._gfmAutolinkLiteralWalkedInto){i=!1;break}}return t.length>0&&!i&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),i}function Ot(t){return rt([Tt(),et(),lt(t),ut(),at()])}const $t={};function Gt(t){const r=this,i=t||$t,e=r.data(),a=e.micromarkExtensions||(e.micromarkExtensions=[]),s=e.fromMarkdownExtensions||(e.fromMarkdownExtensions=[]),n=e.toMarkdownExtensions||(e.toMarkdownExtensions=[]);a.push(Ot(i)),s.push(bt()),n.push(It(i))}export{Gt as default};
